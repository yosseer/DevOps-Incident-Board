FROM registry.ocp4.example.com:8443/ubi9/nodejs-22:1

# Run as root to avoid permission issues in some base images
USER root

WORKDIR /opt/app-root/src

# Install production dependencies
COPY package.json package-lock.json* ./
RUN npm install --production

# Copy application files (static HTML/CSS/JS and server)
COPY . .

# Expose port for the Node server
EXPOSE 8080

# Start the Node server which serves static files and proxies /api
CMD ["node", "server.js"]
